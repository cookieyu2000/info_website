{"ast":null,"code":"import _objectSpread from\"/Users/cookie/Desktop/info/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useMemo,useState}from\"react\";import{supabase}from\"../lib/supabaseClient\";import localContent from\"../content\";import{LanguageProvider}from\"../context/LanguageContext\";import Navbar from\"../components/Navbar\";import Hero from\"../components/Hero\";import Education from\"../components/Education\";import Experience from\"../components/Experience\";import About from\"../components/About\";import Works from\"../components/Works\";import Contact from\"../components/Contact\";import Footer from\"../components/Footer\";import\"./Admin.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SECTION_KEYS=[\"nav\",\"hero\",\"education\",\"experience\",\"about\",\"works\",\"contact\",\"footer\"];const serializeSections=content=>SECTION_KEYS.reduce((acc,key)=>{var _content$key;acc[key]=JSON.stringify((_content$key=content===null||content===void 0?void 0:content[key])!==null&&_content$key!==void 0?_content$key:{},null,2);return acc;},{});const parseSections=sections=>{const parsed={};SECTION_KEYS.forEach(key=>{const value=sections[key];if(!value||value.trim()===\"\"){parsed[key]={};return;}try{parsed[key]=JSON.parse(value);}catch(error){throw new Error(\"\".concat(key,\" JSON \\u932F\\u8AA4\\uFF1A\").concat(error.message));}});return parsed;};function AdminApp(){const[session,setSession]=useState(null);const[authMode,setAuthMode]=useState(\"magic\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[locale,setLocale]=useState(\"zh\");const[dataByLocale,setDataByLocale]=useState({zh:localContent.zh,en:localContent.en});const[editorByLocale,setEditorByLocale]=useState({zh:serializeSections(localContent.zh),en:serializeSections(localContent.en)});const[status,setStatus]=useState(\"\");const[loading,setLoading]=useState(false);const hasSupabase=Boolean(supabase);useEffect(()=>{if(!supabase){return undefined;}supabase.auth.getSession().then(_ref=>{let{data}=_ref;setSession(data.session);});const{data:{subscription}}=supabase.auth.onAuthStateChange((_event,newSession)=>{setSession(newSession);});return()=>subscription.unsubscribe();},[]);const loadFromDatabase=async()=>{if(!supabase){return;}setLoading(true);setStatus(\"\");const{data,error}=await supabase.from(\"site_content\").select(\"locale,data\");if(error){setStatus(\"\\u8B80\\u53D6\\u5931\\u6557\\uFF1A\".concat(error.message));setLoading(false);return;}const next=_objectSpread({},dataByLocale);data.forEach(row=>{if(row.locale&&row.data){next[row.locale]=row.data;}});setDataByLocale(next);setEditorByLocale({zh:serializeSections(next.zh),en:serializeSections(next.en)});setLoading(false);setStatus(\"已從資料庫載入內容\");};const seedFromLocal=async()=>{if(!supabase){return;}setLoading(true);setStatus(\"\");const payload=[{locale:\"zh\",data:localContent.zh},{locale:\"en\",data:localContent.en}];const{error}=await supabase.from(\"site_content\").upsert(payload,{onConflict:\"locale\"});if(error){setStatus(\"\\u5BEB\\u5165\\u5931\\u6557\\uFF1A\".concat(error.message));}else{setDataByLocale({zh:localContent.zh,en:localContent.en});setEditorByLocale({zh:serializeSections(localContent.zh),en:serializeSections(localContent.en)});setStatus(\"已用本地 JSON 覆蓋資料庫內容\");}setLoading(false);};const handleSave=async()=>{if(!supabase){return;}setLoading(true);setStatus(\"\");let parsed;try{parsed=parseSections(editorByLocale[locale]);}catch(error){setStatus(error.message);setLoading(false);return;}const nextData=_objectSpread(_objectSpread({},dataByLocale[locale]),parsed);const{error}=await supabase.from(\"site_content\").upsert({locale,data:nextData},{onConflict:\"locale\"});if(error){setStatus(\"\\u5132\\u5B58\\u5931\\u6557\\uFF1A\".concat(error.message));setLoading(false);return;}setDataByLocale(prev=>_objectSpread(_objectSpread({},prev),{},{[locale]:nextData}));setStatus(\"已儲存到資料庫\");setLoading(false);};const handleLogin=async event=>{event.preventDefault();if(!supabase){return;}setLoading(true);setStatus(\"\");if(authMode===\"magic\"){const{error}=await supabase.auth.signInWithOtp({email,options:{emailRedirectTo:\"\".concat(window.location.origin,\"/admin\")}});setLoading(false);if(error){setStatus(\"\\u767B\\u5165\\u5931\\u6557\\uFF1A\".concat(error.message));}else{setStatus(\"請到信箱點擊登入連結\");}return;}const{error}=await supabase.auth.signInWithPassword({email,password});setLoading(false);if(error){setStatus(\"\\u767B\\u5165\\u5931\\u6557\\uFF1A\".concat(error.message));}};const handleLogout=async()=>{if(!supabase){return;}await supabase.auth.signOut();};const previewContent=useMemo(()=>({zh:dataByLocale.zh,en:dataByLocale.en}),[dataByLocale]);const editor=editorByLocale[locale];if(!hasSupabase){return/*#__PURE__*/_jsx(\"div\",{className:\"admin-shell\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Supabase \\u5C1A\\u672A\\u8A2D\\u5B9A\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u8ACB\\u5728 Vercel \\u8A2D\\u5B9A\\u74B0\\u5883\\u8B8A\\u6578\\u5F8C\\u91CD\\u65B0\\u90E8\\u7F72\\u3002\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"REACT_APP_SUPABASE_URL\"}),/*#__PURE__*/_jsx(\"li\",{children:\"REACT_APP_SUPABASE_ANON_KEY\"})]})]})});}if(!session){return/*#__PURE__*/_jsx(\"div\",{className:\"admin-shell\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u7BA1\\u7406\\u5F8C\\u53F0\\u767B\\u5165\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u8ACB\\u4F7F\\u7528\\u5DF2\\u5EFA\\u7ACB\\u7684\\u5E33\\u865F\\u767B\\u5165\\u3002\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"admin-form\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Email\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:event=>setEmail(event.target.value),required:true})]}),authMode===\"password\"&&/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5BC6\\u78BC\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:event=>setPassword(event.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:authMode===\"magic\"?\"寄送登入連結\":\"登入\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"admin-secondary\",onClick:()=>setAuthMode(mode=>mode===\"magic\"?\"password\":\"magic\"),children:[\"\\u5207\\u63DB\\u5230\",authMode===\"magic\"?\"密碼\":\"magic link\"]})]})]}),status&&/*#__PURE__*/_jsx(\"p\",{className:\"admin-status\",children:status}),/*#__PURE__*/_jsx(\"p\",{className:\"admin-note\",children:\"\\u5982\\u679C\\u9084\\u6C92\\u6709\\u5E33\\u865F\\uFF0C\\u8ACB\\u5230 Supabase Dashboard \\u2192 Authentication \\u2192 Users \\u5EFA\\u7ACB\\u4F7F\\u7528\\u8005\\u3002\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-shell admin-layout\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"admin-panel\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"admin-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u5167\\u5BB9\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-toolbar\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"admin-secondary\",children:\"\\u767B\\u51FA\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-locale\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:locale===\"zh\"?\"active\":\"\",onClick:()=>setLocale(\"zh\"),children:\"\\u4E2D\\u6587\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:locale===\"en\"?\"active\":\"\",onClick:()=>setLocale(\"en\"),children:\"English\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-toolbar\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:loadFromDatabase,disabled:loading,children:\"\\u91CD\\u65B0\\u8F09\\u5165\"}),/*#__PURE__*/_jsx(\"button\",{onClick:seedFromLocal,disabled:loading,children:\"\\u4EE5\\u672C\\u5730 JSON \\u91CD\\u7F6E\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:loading,children:\"\\u5132\\u5B58\\u76EE\\u524D\\u8A9E\\u7CFB\"})]}),status&&/*#__PURE__*/_jsx(\"p\",{className:\"admin-status\",children:status})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-editor\",children:SECTION_KEYS.map(key=>/*#__PURE__*/_jsxs(\"div\",{className:\"admin-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin-section-title\",children:key}),/*#__PURE__*/_jsx(\"textarea\",{value:editor[key],onChange:event=>setEditorByLocale(prev=>_objectSpread(_objectSpread({},prev),{},{[locale]:_objectSpread(_objectSpread({},prev[locale]),{},{[key]:event.target.value})})),rows:8})]},key))})]}),/*#__PURE__*/_jsx(\"main\",{className:\"admin-preview\",children:/*#__PURE__*/_jsx(LanguageProvider,{initialLanguage:locale,initialContent:previewContent,enableRemote:false,children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-preview-inner\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(Hero,{}),/*#__PURE__*/_jsx(Education,{}),/*#__PURE__*/_jsx(Experience,{}),/*#__PURE__*/_jsx(About,{}),/*#__PURE__*/_jsx(Works,{}),/*#__PURE__*/_jsx(Contact,{})]}),/*#__PURE__*/_jsx(Footer,{})]})})})]});}export default AdminApp;","map":{"version":3,"names":["useEffect","useMemo","useState","supabase","localContent","LanguageProvider","Navbar","Hero","Education","Experience","About","Works","Contact","Footer","jsx","_jsx","jsxs","_jsxs","SECTION_KEYS","serializeSections","content","reduce","acc","key","_content$key","JSON","stringify","parseSections","sections","parsed","forEach","value","trim","parse","error","Error","concat","message","AdminApp","session","setSession","authMode","setAuthMode","email","setEmail","password","setPassword","locale","setLocale","dataByLocale","setDataByLocale","zh","en","editorByLocale","setEditorByLocale","status","setStatus","loading","setLoading","hasSupabase","Boolean","undefined","auth","getSession","then","_ref","data","subscription","onAuthStateChange","_event","newSession","unsubscribe","loadFromDatabase","from","select","next","_objectSpread","row","seedFromLocal","payload","upsert","onConflict","handleSave","nextData","prev","handleLogin","event","preventDefault","signInWithOtp","options","emailRedirectTo","window","location","origin","signInWithPassword","handleLogout","signOut","previewContent","editor","className","children","onSubmit","type","onChange","target","required","disabled","onClick","mode","map","rows","initialLanguage","initialContent","enableRemote"],"sources":["/Users/cookie/Desktop/info/src/admin/AdminApp.js"],"sourcesContent":["import { useEffect, useMemo, useState } from \"react\";\nimport { supabase } from \"../lib/supabaseClient\";\nimport localContent from \"../content\";\nimport { LanguageProvider } from \"../context/LanguageContext\";\nimport Navbar from \"../components/Navbar\";\nimport Hero from \"../components/Hero\";\nimport Education from \"../components/Education\";\nimport Experience from \"../components/Experience\";\nimport About from \"../components/About\";\nimport Works from \"../components/Works\";\nimport Contact from \"../components/Contact\";\nimport Footer from \"../components/Footer\";\nimport \"./Admin.css\";\n\nconst SECTION_KEYS = [\n  \"nav\",\n  \"hero\",\n  \"education\",\n  \"experience\",\n  \"about\",\n  \"works\",\n  \"contact\",\n  \"footer\",\n];\n\nconst serializeSections = (content) =>\n  SECTION_KEYS.reduce((acc, key) => {\n    acc[key] = JSON.stringify(content?.[key] ?? {}, null, 2);\n    return acc;\n  }, {});\n\nconst parseSections = (sections) => {\n  const parsed = {};\n\n  SECTION_KEYS.forEach((key) => {\n    const value = sections[key];\n\n    if (!value || value.trim() === \"\") {\n      parsed[key] = {};\n      return;\n    }\n\n    try {\n      parsed[key] = JSON.parse(value);\n    } catch (error) {\n      throw new Error(`${key} JSON 錯誤：${error.message}`);\n    }\n  });\n\n  return parsed;\n};\n\nfunction AdminApp() {\n  const [session, setSession] = useState(null);\n  const [authMode, setAuthMode] = useState(\"magic\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [locale, setLocale] = useState(\"zh\");\n  const [dataByLocale, setDataByLocale] = useState({\n    zh: localContent.zh,\n    en: localContent.en,\n  });\n  const [editorByLocale, setEditorByLocale] = useState({\n    zh: serializeSections(localContent.zh),\n    en: serializeSections(localContent.en),\n  });\n  const [status, setStatus] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const hasSupabase = Boolean(supabase);\n\n  useEffect(() => {\n    if (!supabase) {\n      return undefined;\n    }\n\n    supabase.auth.getSession().then(({ data }) => {\n      setSession(data.session);\n    });\n\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, newSession) => {\n      setSession(newSession);\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  const loadFromDatabase = async () => {\n    if (!supabase) {\n      return;\n    }\n\n    setLoading(true);\n    setStatus(\"\");\n\n    const { data, error } = await supabase\n      .from(\"site_content\")\n      .select(\"locale,data\");\n\n    if (error) {\n      setStatus(`讀取失敗：${error.message}`);\n      setLoading(false);\n      return;\n    }\n\n    const next = { ...dataByLocale };\n\n    data.forEach((row) => {\n      if (row.locale && row.data) {\n        next[row.locale] = row.data;\n      }\n    });\n\n    setDataByLocale(next);\n    setEditorByLocale({\n      zh: serializeSections(next.zh),\n      en: serializeSections(next.en),\n    });\n    setLoading(false);\n    setStatus(\"已從資料庫載入內容\");\n  };\n\n  const seedFromLocal = async () => {\n    if (!supabase) {\n      return;\n    }\n\n    setLoading(true);\n    setStatus(\"\");\n\n    const payload = [\n      { locale: \"zh\", data: localContent.zh },\n      { locale: \"en\", data: localContent.en },\n    ];\n\n    const { error } = await supabase\n      .from(\"site_content\")\n      .upsert(payload, { onConflict: \"locale\" });\n\n    if (error) {\n      setStatus(`寫入失敗：${error.message}`);\n    } else {\n      setDataByLocale({ zh: localContent.zh, en: localContent.en });\n      setEditorByLocale({\n        zh: serializeSections(localContent.zh),\n        en: serializeSections(localContent.en),\n      });\n      setStatus(\"已用本地 JSON 覆蓋資料庫內容\");\n    }\n\n    setLoading(false);\n  };\n\n  const handleSave = async () => {\n    if (!supabase) {\n      return;\n    }\n\n    setLoading(true);\n    setStatus(\"\");\n\n    let parsed;\n\n    try {\n      parsed = parseSections(editorByLocale[locale]);\n    } catch (error) {\n      setStatus(error.message);\n      setLoading(false);\n      return;\n    }\n\n    const nextData = {\n      ...dataByLocale[locale],\n      ...parsed,\n    };\n\n    const { error } = await supabase\n      .from(\"site_content\")\n      .upsert({ locale, data: nextData }, { onConflict: \"locale\" });\n\n    if (error) {\n      setStatus(`儲存失敗：${error.message}`);\n      setLoading(false);\n      return;\n    }\n\n    setDataByLocale((prev) => ({ ...prev, [locale]: nextData }));\n    setStatus(\"已儲存到資料庫\");\n    setLoading(false);\n  };\n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n\n    if (!supabase) {\n      return;\n    }\n\n    setLoading(true);\n    setStatus(\"\");\n\n    if (authMode === \"magic\") {\n      const { error } = await supabase.auth.signInWithOtp({\n        email,\n        options: {\n          emailRedirectTo: `${window.location.origin}/admin`,\n        },\n      });\n\n      setLoading(false);\n\n      if (error) {\n        setStatus(`登入失敗：${error.message}`);\n      } else {\n        setStatus(\"請到信箱點擊登入連結\");\n      }\n\n      return;\n    }\n\n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n\n    setLoading(false);\n\n    if (error) {\n      setStatus(`登入失敗：${error.message}`);\n    }\n  };\n\n  const handleLogout = async () => {\n    if (!supabase) {\n      return;\n    }\n\n    await supabase.auth.signOut();\n  };\n\n  const previewContent = useMemo(\n    () => ({ zh: dataByLocale.zh, en: dataByLocale.en }),\n    [dataByLocale]\n  );\n\n  const editor = editorByLocale[locale];\n\n  if (!hasSupabase) {\n    return (\n      <div className=\"admin-shell\">\n        <div className=\"admin-card\">\n          <h1>Supabase 尚未設定</h1>\n          <p>請在 Vercel 設定環境變數後重新部署。</p>\n          <ul>\n            <li>REACT_APP_SUPABASE_URL</li>\n            <li>REACT_APP_SUPABASE_ANON_KEY</li>\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  if (!session) {\n    return (\n      <div className=\"admin-shell\">\n        <div className=\"admin-card\">\n          <h1>管理後台登入</h1>\n          <p>請使用已建立的帳號登入。</p>\n          <form className=\"admin-form\" onSubmit={handleLogin}>\n            <label>\n              Email\n              <input\n                type=\"email\"\n                value={email}\n                onChange={(event) => setEmail(event.target.value)}\n                required\n              />\n            </label>\n            {authMode === \"password\" && (\n              <label>\n                密碼\n                <input\n                  type=\"password\"\n                  value={password}\n                  onChange={(event) => setPassword(event.target.value)}\n                  required\n                />\n              </label>\n            )}\n            <div className=\"admin-actions\">\n              <button type=\"submit\" disabled={loading}>\n                {authMode === \"magic\" ? \"寄送登入連結\" : \"登入\"}\n              </button>\n              <button\n                type=\"button\"\n                className=\"admin-secondary\"\n                onClick={() =>\n                  setAuthMode((mode) => (mode === \"magic\" ? \"password\" : \"magic\"))\n                }\n              >\n                切換到{authMode === \"magic\" ? \"密碼\" : \"magic link\"}\n              </button>\n            </div>\n          </form>\n          {status && <p className=\"admin-status\">{status}</p>}\n          <p className=\"admin-note\">\n            如果還沒有帳號，請到 Supabase Dashboard → Authentication → Users\n            建立使用者。\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"admin-shell admin-layout\">\n      <aside className=\"admin-panel\">\n        <header className=\"admin-header\">\n          <h1>內容管理</h1>\n          <div className=\"admin-toolbar\">\n            <button onClick={handleLogout} className=\"admin-secondary\">\n              登出\n            </button>\n          </div>\n        </header>\n        <div className=\"admin-controls\">\n          <div className=\"admin-locale\">\n            <button\n              type=\"button\"\n              className={locale === \"zh\" ? \"active\" : \"\"}\n              onClick={() => setLocale(\"zh\")}\n            >\n              中文\n            </button>\n            <button\n              type=\"button\"\n              className={locale === \"en\" ? \"active\" : \"\"}\n              onClick={() => setLocale(\"en\")}\n            >\n              English\n            </button>\n          </div>\n          <div className=\"admin-toolbar\">\n            <button onClick={loadFromDatabase} disabled={loading}>\n              重新載入\n            </button>\n            <button onClick={seedFromLocal} disabled={loading}>\n              以本地 JSON 重置\n            </button>\n            <button onClick={handleSave} disabled={loading}>\n              儲存目前語系\n            </button>\n          </div>\n          {status && <p className=\"admin-status\">{status}</p>}\n        </div>\n        <div className=\"admin-editor\">\n          {SECTION_KEYS.map((key) => (\n            <div className=\"admin-section\" key={key}>\n              <div className=\"admin-section-title\">{key}</div>\n              <textarea\n                value={editor[key]}\n                onChange={(event) =>\n                  setEditorByLocale((prev) => ({\n                    ...prev,\n                    [locale]: {\n                      ...prev[locale],\n                      [key]: event.target.value,\n                    },\n                  }))\n                }\n                rows={8}\n              />\n            </div>\n          ))}\n        </div>\n      </aside>\n      <main className=\"admin-preview\">\n        <LanguageProvider\n          initialLanguage={locale}\n          initialContent={previewContent}\n          enableRemote={false}\n        >\n          <div className=\"admin-preview-inner\">\n            <Navbar />\n            <main>\n              <Hero />\n              <Education />\n              <Experience />\n              <About />\n              <Works />\n              <Contact />\n            </main>\n            <Footer />\n          </div>\n        </LanguageProvider>\n      </main>\n    </div>\n  );\n}\n\nexport default AdminApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}